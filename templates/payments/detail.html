{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-6">
  <!-- Header -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6">
    <h1 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
      <i class="fas fa-receipt text-primary-600"></i>
      Payment Details
    </h1>
    <a href="{% url 'payments:billing_history' %}" class="text-sm text-primary-600 hover:underline flex items-center gap-1">
      <i class="fas fa-arrow-left"></i> Back to Payments
    </a>
  </div>

  <!-- Detail Card -->
  <div class="bg-white shadow-md rounded-lg p-6 space-y-6">
    <!-- Status and Type -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <label class="text-sm text-gray-500">Status</label>
        <div class="flex items-center gap-2">
          {% if payment.status == 'pending' %}
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
              <i class="fas fa-clock mr-1"></i> Pending
            </span>
          {% elif payment.status == 'completed' %}
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
              <i class="fas fa-check-circle mr-1"></i> Completed
            </span>
          {% elif payment.status == 'failed' %}
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
              <i class="fas fa-times-circle mr-1"></i> Failed
            </span>
          {% else %}
            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800">
              <i class="fas fa-question-circle mr-1"></i> Unknown
            </span>
          {% endif %}
        </div>
      </div>

      <div>
        <label class="text-sm text-gray-500">Payment Type</label>
        <div class="flex items-center gap-2 text-lg font-medium text-gray-700">
          <i class="fas fa-tags text-primary-500"></i>
          {{ payment.get_payment_type_display }}
        </div>
      </div>
    </div>

    <!-- Amount and Date -->
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <label class="text-sm text-gray-500">Amount</label>
        <div class="text-lg font-semibold text-green-600">
          ${{ payment.amount }}
        </div>
      </div>
      <div>
        <label class="text-sm text-gray-500">Date</label>
        <div class="text-lg text-gray-700">
          {{ payment.created_at|date:"F j, Y, g:i a" }}
        </div>
      </div>
    </div>

    <!-- Notes -->
    {% if payment.notes %}
    <div>
      <label class="text-sm text-gray-500">Notes</label>
      <div class="text-gray-700 whitespace-pre-line border rounded p-3 bg-gray-50">
        {{ payment.notes }}
      </div>
    </div>
    {% endif %}

    <!-- Trainer Info -->
    <div>
      <label class="text-sm text-gray-500">Trainer</label>
      <div class="flex items-center gap-2 text-gray-700">
        <i class="fas fa-user text-primary-500"></i>
        {{ payment.trainer.get_full_name }}
      </div>
    </div>
  </div>

  <!-- Actions -->
  <div class="mt-6 flex flex-col sm:flex-row justify-end gap-4">
    <a href="{% url 'payments:update' payment.pk %}" class="px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700 transition flex items-center gap-2">
      <i class="fas fa-edit"></i> Edit
    </a>
    <form action="{% url 'payments:delete' payment.pk %}" method="post" onsubmit="return confirm('Are you sure you want to delete this payment?')">
      {% csrf_token %}
      <button type="submit" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition flex items-center gap-2">
        <i class="fas fa-trash-alt"></i> Delete
      </button>
    </form>
  </div>
</div>
{% endblock %}
