{% extends 'list_base.html' %}

{% block list_title %}Meal Plans{% endblock %}

{% block header_actions %}
<div class="flex flex-wrap gap-4 mt-6">

  <!-- Create Plan -->
  <a href="{% url 'nutrition:create' %}"
     class="inline-flex items-center space-x-2 px-6 py-2 rounded-xl font-semibold shadow-lg transition transform hover:scale-105
            bg-gradient-to-r from-primary-600 to-primary-400 text-white">
    <i class="fas fa-clipboard-list text-white"></i>
    <span>Create Plan</span>
  </a>

  <!-- Add Food -->
  <a href="{% url 'nutrition:food_create' %}"
     class="inline-flex items-center space-x-2 px-6 py-2 rounded-xl font-semibold shadow-lg transition transform hover:scale-105
            bg-gradient-to-r from-success-600 to-success-400 text-white">
    <i class="fas fa-carrot text-white"></i>
    <span>Add Food</span>
  </a>

  <!-- See Food List -->
  <a href="{% url 'nutrition:food_list' %}"
     class="inline-flex items-center space-x-2 px-6 py-2 rounded-xl font-semibold shadow-lg transition transform hover:scale-105
            bg-gradient-to-r from-warning-600 to-warning-400 text-white">
    <i class="fas fa-list-ul text-white"></i>
    <span>See Food List</span>
  </a>

</div>
{% endblock %}

{% block cards_view %}

{% for plan in meal_plans %}
<div class="bg-white rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 p-6 flex flex-col">
    <h3 class="mt-2 text-xl font-semibold text-primary-900">{{ plan.title }}</h3>
    <p class="text-sm text-primary-500 mt-1">Client: {{ plan.client.user.get_full_name }}</p>
    <p class="text-sm text-primary-500">Meal Type: {{ plan.get_meal_type_display }}</p>
    <p class="text-sm text-primary-500">Calories: {{ plan.daily_calories }} kcal</p>
    <div class="mt-3 flex space-x-2">
        <a href="{{ plan.get_absolute_url }}" class="bg-gradient-to-r from-success-400 to-success-300 text-white px-4 py-1 rounded-full text-sm font-medium flex items-center space-x-1 hover:scale-105 transition">
            <i class="fas fa-eye"></i>
            <span>View</span>
        </a>
        <a href="{% url 'nutrition:edit' plan.pk %}" class="bg-gradient-to-r from-warning-400 to-warning-300 text-white px-4 py-1 rounded-full text-sm font-medium flex items-center space-x-1 hover:scale-105 transition">
            <i class="fas fa-edit"></i>
            <span>Edit</span>
        </a>
        <a href="{% url 'nutrition:delete' plan.pk %}" class="bg-gradient-to-r from-danger-400 to-danger-300 text-white px-4 py-1 rounded-full text-sm font-medium flex items-center space-x-1 hover:scale-105 transition">
            <i class="fas fa-trash"></i>
            <span>Delete</span>
        </a>
    </div>
</div>
{% empty %}
<p class="col-span-full text-center text-primary-400">No meal plans found. <a href="{% url 'nutrition:create' %}" class="text-primary-600 hover:underline">Create one</a></p>
{% endfor %}
{% endblock %}

{% block table_view %}
<table class="min-w-full divide-y divide-primary-200">
    <thead class="bg-primary-50">
        <tr>
            <th class="px-6 py-3 text-left text-xs font-semibold text-primary-400 uppercase tracking-wide">Title</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-primary-400 uppercase tracking-wide">Client</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-primary-400 uppercase tracking-wide">Meal Type</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-primary-400 uppercase tracking-wide">Calories</th>
            <th class="px-6 py-3 text-left text-xs font-semibold text-primary-400 uppercase tracking-wide">Actions</th>
        </tr>
    </thead>
    <tbody class="divide-y divide-primary-100">
        {% for plan in meal_plans %}
        <tr class="hover:bg-primary-50 transition">
            <td class="px-6 py-4 font-medium text-primary-900">{{ plan.title }}</td>
            <td class="px-6 py-4 text-sm text-primary-500">{{ plan.client.user.get_full_name }}</td>
            <td class="px-6 py-4 text-sm text-primary-500">{{ plan.get_meal_type_display }}</td>
            <td class="px-6 py-4 text-sm text-primary-500">{{ plan.daily_calories }} kcal</td>
            <td class="px-6 py-4 flex space-x-2">
                <a href="{{ plan.get_absolute_url }}" class="text-success-600 font-medium flex items-center space-x-1 hover:underline">
                    <i class="fas fa-eye"></i> <span>View</span>
                </a>
                <a href="{% url 'nutrition:edit' plan.pk %}" class="text-warning-600 font-medium flex items-center space-x-1 hover:underline">
                    <i class="fas fa-edit"></i> <span>Edit</span>
                </a>
                <a href="{% url 'nutrition:delete' plan.pk %}" class="text-danger-600 font-medium flex items-center space-x-1 hover:underline">
                    <i class="fas fa-trash"></i> <span>Delete</span>
                </a>
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" class="px-6 py-8 text-center text-primary-400">No meal plans found. <a href="{% url 'nutrition:create' %}" class="text-primary-600 hover:underline">Create one</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}

{% block pagination %}
{% if is_paginated %}
<div class="flex justify-center mt-4 space-x-2">
    {% if page_obj.has_previous %}
    <a href="?page={{ page_obj.previous_page_number }}" class="px-3 py-1 border rounded-md hover:bg-primary-50">&laquo; Prev</a>
    {% endif %}
    <span class="px-3 py-1 border rounded-md bg-primary-100">{{ page_obj.number }}</span>
    {% if page_obj.has_next %}
    <a href="?page={{ page_obj.next_page_number }}" class="px-3 py-1 border rounded-md hover:bg-primary-50">Next &raquo;</a>
    {% endif %}
</div>
{% endif %}
{% endblock %}
